{"version":3,"sources":["webpack:///./js/apiService.js","webpack:///./js/components/load-more-btn.js","webpack:///./js/components/renderPagination.js","webpack:///./js/components/makePaginationsMarkup.js","webpack:///./js/components/renderСomment.js","webpack:///./js/components/makeСommentsMarkup.js","webpack:///./js/components/loader.js","webpack:///./js/components/renderMore.js","webpack:///./js/components/fetchNextComents.js","webpack:///./js/components/addComment.js"],"names":["BASE_URL","NewsApiService","this","searchQuery","page","fetchApi","url","fetch","then","response","ok","Error","console","log","json","incrementPage","fetchPostApi","comment","dataPost","method","headers","body","JSON","stringify","status","resetPage","newQuery","fetchWithErrorHandling","config","Promise","reject","LoadMoreBtn","selector","hidden","refs","getRefs","hide","button","document","querySelector","label","spinner","enable","disabled","textContent","classList","add","disable","remove","show","paginationList","renderPagination","query","markup","map","active","join","innerHTML","commentsList","renderСomment","name","text","updated_at","slice","Loader","loader","addLoader","clearLoader","changeLoader","newsApiService","loadMoreBtn","renderMore","data","links","catch","err","addEventListener","e","target","dataset","src","fetchComents","finally","window","scrollTo","top","behavior","preventDefault","inputName","value","inputComment","options","addFetchComents","reset"],"mappings":"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","file":"main.13b1956936fd9fb4d16d.js","sourcesContent":["const BASE_URL = ' https://jordan.ashton.fashion/api/goods/30/comments';\r\n\r\nexport default class NewsApiService {\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n\r\n  fetchApi() {\r\n    const url = `${BASE_URL}?page=${this.page}`;\r\n    return fetch(url)\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error(console.log('Error'));\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(response => {\r\n        this.incrementPage();\r\n        return response;\r\n      });\r\n  }\r\n\r\n  fetchPostApi(comment) {\r\n    const url = `${BASE_URL}`;\r\n    const dataPost = {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(comment),\r\n    };\r\n    return fetch(url, dataPost).then(response => {\r\n      console.log(response.status);\r\n    });\r\n  }\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n\r\nasync function fetchWithErrorHandling(url = '', config = {}) {\r\n  const response = await fetch(url, config);\r\n  return response.ok\r\n    ? await response.json()\r\n    : Promise.reject(new Error('Not found'));\r\n}\r\n\r\nexport function fetchComents(BASE_URL) {\r\n  return fetchWithErrorHandling(`${BASE_URL}`);\r\n}\r\n\r\nexport function addFetchComents(comment) {\r\n  const options = {\r\n    method: 'POST',\r\n\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(comment),\r\n  };\r\n  return fetchWithErrorHandling(`${BASE_URL}`, options);\r\n}\r\n","export default class LoadMoreBtn {\r\n  constructor({ selector, hidden = false }) {\r\n    this.refs = this.getRefs(selector);\r\n\r\n    hidden && this.hide();\r\n  }\r\n\r\n  getRefs(selector) {\r\n    const refs = {};\r\n    refs.button = document.querySelector(selector);\r\n    refs.label = refs.button.querySelector('.label');\r\n    refs.spinner = refs.button.querySelector('.spinner');\r\n\r\n    return refs;\r\n  }\r\n\r\n  enable() {\r\n    this.refs.button.disabled = false;\r\n    this.refs.label.textContent = 'Показать ещё';\r\n    this.refs.spinner.classList.add('is-hidden');\r\n  }\r\n\r\n  disable() {\r\n    this.refs.button.disabled = true;\r\n    this.refs.label.textContent = 'Загружаем...';\r\n    this.refs.spinner.classList.remove('is-hidden');\r\n  }\r\n\r\n  show() {\r\n    this.refs.button.classList.remove('is-hidden');\r\n  }\r\n\r\n  hide() {\r\n    this.refs.button.classList.add('is-hidden');\r\n  }\r\n}\r\n","import makePaginationsMarkup from './makePaginationsMarkup.js';\r\n\r\nconst paginationList = document.querySelector('.js-paginations');\r\n\r\nexport default function renderPagination(query) {\r\n  const markup = makePaginationsMarkup(query);\r\n  paginationList.innerHTML = markup;\r\n}\r\n","export default function makePaginationsMarkup(links) {\r\n  return links\r\n    .map(({ active, label, url }) => {\r\n      return active\r\n        ? `<li><button class=\"paginations__item paginations__item--active\" data-active=\"${active}\" data-src=\"${url}\" type=\"button\">${label}</button></li>`\r\n        : url === null\r\n        ? `<li><button class=\"paginations__item\" data-active=\"${active}\" data-src=\"${url}\" disabled=\"disabled\" type=\"button\">${label}</button></li>`\r\n        : `<li><button class=\"paginations__item\" data-active=\"${active}\" data-src=\"${url}\" type=\"button\">${label}</button></li>`;\r\n    })\r\n    .join('');\r\n}\r\n","import makeСommentsMarkup from './makeСommentsMarkup.js';\r\n\r\nconst commentsList = document.querySelector('.js-comments');\r\n\r\nexport default function renderСomment(query) {\r\n  const markup = makeСommentsMarkup(query);\r\n  // commentsList.insertAdjacentHTML('beforeend', markup);\r\n  commentsList.innerHTML = markup;\r\n}\r\n","export default function makeСommentsMarkup(comments) {\r\n  return comments\r\n    .map(({ name, text, updated_at }) => {\r\n      return `<li class=\"comments__item\">\r\n          <div class=\"comments-block\">\r\n            <p class=\"comments-name\">\r\n              <svg width=\"18\" height=\"18\">\r\n                <use href=\"../images/icons.svg#person-black\"></use>\r\n              </svg>\r\n              ${name}\r\n            </p>\r\n\r\n            <p class=\"comments-date\">${updated_at.slice(0, 10)}</p>\r\n          </div>\r\n          <p class=\"comments-text\">${text}</p>\r\n        </li>`;\r\n    })\r\n    .join('');\r\n}\r\n","export default class Loader {\r\n    constructor(selector) {\r\n        this.loader = document.querySelector(selector)\r\n    };\r\n\r\n    addLoader() {\r\n        this.loader.classList.remove('hidden');\r\n    };\r\n\r\n    clearLoader() {\r\n        this.loader.classList.add('hidden');\r\n    }\r\n}","import NewsApiService from '../apiService.js';\r\n\r\nimport LoadMoreBtn from './load-more-btn';\r\nimport renderPagination from './renderPagination.js';\r\nimport renderСomment from './renderСomment.js';\r\nimport Loader from './loader.js';\r\n\r\nconst changeLoader = new Loader('.loader');\r\n\r\nconst newsApiService = new NewsApiService();\r\n\r\nconst loadMoreBtn = new LoadMoreBtn({\r\n  selector: '[data-action=\"load-more\"]',\r\n  hidden: true,\r\n});\r\n\r\nloadMoreBtn.refs.button.addEventListener('click', renderMore);\r\n\r\nfunction renderMore() {\r\n  changeLoader.addLoader();\r\n  loadMoreBtn.disable();\r\n\r\n  newsApiService\r\n    .fetchApi()\r\n    .then(({ data, links }) => {\r\n      renderСomment(data);\r\n      renderPagination(links);\r\n\r\n      changeLoader.clearLoader();\r\n      loadMoreBtn.enable();\r\n    })\r\n    .catch(err => console.log(err));\r\n}\r\n\r\nloadMoreBtn.show();\r\nrenderMore();\r\n","import { fetchComents } from '../apiService.js';\r\n\r\nimport renderPagination from './renderPagination.js';\r\nimport renderСomment from './renderСomment.js';\r\nimport Loader from './loader.js';\r\n\r\nconst changeLoader = new Loader('.loader');\r\n\r\nconst paginationList = document.querySelector('.js-paginations');\r\n\r\npaginationList.addEventListener('click', fetchNextComents);\r\n\r\nfunction fetchNextComents(e) {\r\n  const url = e.target.dataset.src;\r\n\r\n  if (url === null) {\r\n    console.log('tut null');\r\n    return;\r\n  } else {\r\n    // changeLoader.addLoader();\r\n\r\n    return fetchComents(url)\r\n      .then(({ data, links }) => {\r\n        changeLoader.addLoader();\r\n        renderСomment(data);\r\n        renderPagination(links);\r\n        changeLoader.clearLoader();\r\n      })\r\n      .finally(() => {\r\n        window.scrollTo({\r\n          top: 0,\r\n          behavior: 'smooth',\r\n        });\r\n      });\r\n  }\r\n}\r\n","import { addFetchComents } from '../apiService.js';\r\n\r\nconst formBtn = document.querySelector('.form__button');\r\n\r\nformBtn.addEventListener('click', handleSubmitBtn);\r\n\r\nfunction handleSubmitBtn(e) {\r\n  e.preventDefault();\r\n\r\n  const inputName = document.querySelector('.input-name').value;\r\n  const inputComment = document.querySelector('.input-comment').value;\r\n\r\n  const comment = {\r\n    name: inputName,\r\n    text: inputComment,\r\n  };\r\n\r\n  addFetchComents(comment);\r\n\r\n  document.querySelector('.modal-form').reset();\r\n\r\n  return;\r\n}\r\n"],"sourceRoot":""}