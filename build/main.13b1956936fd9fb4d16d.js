(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{L1EO:function(t,e,n){},QfWi:function(t,e,n){"use strict";n.r(e);n("L1EO"),n("JBxO"),n("FdtR"),n("wcNg");function o(t,e,n,o,r,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){o(a,r,i,s,c,"next",t)}function c(t){o(a,r,i,s,c,"throw",t)}s(void 0)}))}}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=" https://jordan.ashton.fashion/api/goods/30/comments",s=function(){function t(){this.searchQuery="",this.page=1}var e,n,o,r=t.prototype;return r.fetchApi=function(){var t=this,e=a+"?page="+this.page;return fetch(e).then((function(t){if(!t.ok)throw new Error(console.log("Error"));return t.json()})).then((function(e){return t.incrementPage(),e}))},r.fetchPostApi=function(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch(" https://jordan.ashton.fashion/api/goods/30/comments",e).then((function(t){console.log(t.status)}))},r.incrementPage=function(){this.page+=1},r.resetPage=function(){this.page=1},e=t,(n=[{key:"query",get:function(){return this.searchQuery},set:function(t){this.searchQuery=t}}])&&i(e.prototype,n),o&&i(e,o),t}();function c(t,e){return u.apply(this,arguments)}function u(){return(u=r(regeneratorRuntime.mark((function t(e,n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=""),void 0===n&&(n={}),t.next=4,fetch(e,n);case 4:if(!(o=t.sent).ok){t.next=11;break}return t.next=8,o.json();case 8:t.t0=t.sent,t.next=12;break;case 11:t.t0=Promise.reject(new Error("Not found"));case 12:return t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var d=function(){function t(t){var e=t.selector,n=t.hidden,o=void 0!==n&&n;this.refs=this.getRefs(e),o&&this.hide()}var e=t.prototype;return e.getRefs=function(t){var e={};return e.button=document.querySelector(t),e.label=e.button.querySelector(".label"),e.spinner=e.button.querySelector(".spinner"),e},e.enable=function(){this.refs.button.disabled=!1,this.refs.label.textContent="Показать ещё",this.refs.spinner.classList.add("is-hidden")},e.disable=function(){this.refs.button.disabled=!0,this.refs.label.textContent="Загружаем...",this.refs.spinner.classList.remove("is-hidden")},e.show=function(){this.refs.button.classList.remove("is-hidden")},e.hide=function(){this.refs.button.classList.add("is-hidden")},t}();n("8cZI"),n("lmye");var l=document.querySelector(".js-paginations");function f(t){var e=t.map((function(t){var e=t.active,n=t.label,o=t.url;return e?'<li><button class="paginations__item paginations__item--active" data-active="'+e+'" data-src="'+o+'" type="button">'+n+"</button></li>":null===o?'<li><button class="paginations__item" data-active="'+e+'" data-src="'+o+'" disabled="disabled" type="button">'+n+"</button></li>":'<li><button class="paginations__item" data-active="'+e+'" data-src="'+o+'" type="button">'+n+"</button></li>"})).join("");l.innerHTML=e}n("WB5j"),n("D/wG");var h=document.querySelector(".js-comments");function p(t){var e=t.map((function(t){var e=t.name,n=t.text;return'<li class="comments__item">\n          <div class="comments-block">\n            <p class="comments-name">\n              <svg width="18" height="18">\n                <use href="../images/icons.svg#person-black"></use>\n              </svg>\n              '+e+'\n            </p>\n\n            <p class="comments-date">'+t.updated_at.slice(0,10)+'</p>\n          </div>\n          <p class="comments-text">'+n+"</p>\n        </li>"})).join("");h.innerHTML=e}var m=function(){function t(t){this.loader=document.querySelector(t)}var e=t.prototype;return e.addLoader=function(){this.loader.classList.remove("hidden")},e.clearLoader=function(){this.loader.classList.add("hidden")},t}(),v=new m(".loader"),b=new s,y=new d({selector:'[data-action="load-more"]',hidden:!0});function g(){v.addLoader(),y.disable(),b.fetchApi().then((function(t){var e=t.data,n=t.links;p(e),f(n),v.clearLoader(),y.enable()})).catch((function(t){return console.log(t)}))}y.refs.button.addEventListener("click",g),y.show(),g();n("QDHd");var w=new m(".loader");document.querySelector(".js-paginations").addEventListener("click",(function(t){var e=t.target.dataset.src;return null===e?void console.log("tut null"):function(t){return c(""+t)}(e).then((function(t){var e=t.data,n=t.links;w.addLoader(),p(e),f(n),w.clearLoader()})).finally((function(){window.scrollTo({top:0,behavior:"smooth"})}))})),document.querySelector(".form__button").addEventListener("click",(function(t){t.preventDefault();var e=document.querySelector(".input-name").value,n=document.querySelector(".input-comment").value;return function(t){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};c(""+a,e)}({name:e,text:n}),void document.querySelector(".modal-form").reset()}))}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.13b1956936fd9fb4d16d.js.map